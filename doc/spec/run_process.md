gconf ラッパー仕様
==================

処理概要
--------

基本処理フロー

* Excel 検査シート読み込み
* config.groovy 設定ファイル読込み
* 検査対象サーバリスト作成
    * シート内レコードを順に読込み
    * サーバインスタンス初期化
    * config.groovy 設定ファイルのテンプレート変換
* 検査対象サーバリストから toml ファイル作成
* toml ファイルごとに gconf 実行

リモート採取設定

* Excel 検査シート
    * キー項目：{サーバ名}, {プラットフォーム}とする
    * 属性：{テンプレートID}, {IP/URL}, {ユーザ} , {パスワード}
        * {テンプレートID} パターン
            * 従来パターンのリモートアクセス
                * {テンプレートID}を指定し、各接続パラメータ読込み
                * config.groovy からパラメータを読み込む
            * エージェントモード
                * エージェント接続　： {IP}のみ指定
            * HUBサーバモード
                * ディレクトリ指定

インベントリ採取実行

* gconf 設定 toml ファイル
    * エージェントモードの場合は実行ない
        * 直接、gconf get --from-url {https://agenthost:59001} --out {dir}を実行
        * クライアント証明書が必要 config/network の下に保存
            * getperf agent の network ディレクトリをそのままコピー
    * 検査対象サーバリストを順に読んで作成
    * build/gconf/{プラットフォーム}__{テンプレートID}.toml 作成
    * キー項目は、プラットフォーム, テンプレートID(ない場合はdefault)
    * gconf 実行
        * gconf --template {プラットフォーム} --config {toml} run --out {ddir}
* ログ保存ディレクトリ
    * build/log の下に保存
    * build/log/{host}/{platform} を作成する
    * ディレクトリのnullチェックはしない。上書き更新する
    * DryRun モードでログ読み込む

インベントリ結果の集計

移行検討
--------

直近の対応

* Excel 検査シート読込みプロトタイプ
    * 検査シートサンプル作成：linux, vCenter 2式
    * Excle パーサ既存コード調査
    * Apache POI リファレンス/動向調査
    * Excle パーサ移行実装

ストラテジーパターンについて

* プラットフォーム毎のストラテジーパターンの実装は極力しない
    * 共通項目で toml を作る
    * 上記基本処理フローはプラットフォームごとに変えない

